import{c as se,j as e,a as je,u as ve,b as fe,r as _,d as ge,B as H,C as le,e as P,F as q,A as ne,g as K,h as me,T as ee,W as U,i as X,S as be}from"./index-C0KzVn15.js";import{C as h,a as p,b as u,c as j}from"./Card-CZhI6Cu1.js";import{B as Ne}from"./Badge-d4rYTU1N.js";import{D as z}from"./DataTable-9_VyufDO.js";import{S as ye}from"./StatusBadge-D5wkbHRd.js";import{T as B,S as f}from"./Skeleton-wCrGMhoU.js";import{S as b}from"./ScrollReveal-CaWzGJkt.js";import{p as _e,s as oe}from"./spm-DzdMHgGJ.js";import{t as J,f as W,a as we}from"./formatters-B3FH-qkk.js";import{P as ke}from"./plus-Dbvc4IBj.js";import{X as ce}from"./x-circle-BDEZXh-7.js";import{A as T}from"./arrow-right-DHxNFa6k.js";import{C as Ce}from"./check-circle-BLjEl7wu.js";import{A as Se}from"./alert-circle-mNlb3XAQ.js";import{C as Z}from"./calendar-BlvF1TmX.js";import"./inbox-BkkTBKor.js";import"./chevron-up-CrKgNhA7.js";import"./styleConfig-C9OnW5Az.js";import"./archive-C56S_fxM.js";const Me=se("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),de=se("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),xe=se("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);function Pe({data:t,maxValue:i,color:r="var(--primary)",height:a=64}){const n=i||Math.max(...t,1);return e.jsx("div",{className:"flex items-end gap-1",style:{height:a},children:t.map((o,c)=>{const d=o/n*100;return e.jsx("div",{className:"flex-1 rounded-t-sm transition-all duration-300 hover:opacity-80",style:{height:`${d}%`,backgroundColor:r,minHeight:o>0?"4px":"0"},title:o.toString()},c)})})}function Ae({percentage:t,size:i=96,strokeWidth:r=8,color:a="var(--primary)",bgColor:n="var(--border)",showLabel:o=!0,label:c}){const d=(i-r)/2,x=2*Math.PI*d,N=x-t/100*x,v=i/2;return e.jsxs("div",{className:"relative",style:{width:i,height:i},children:[e.jsxs("svg",{className:"w-full h-full -rotate-90",children:[e.jsx("circle",{cx:v,cy:v,r:d,stroke:n,strokeWidth:r,fill:"none"}),e.jsx("circle",{cx:v,cy:v,r:d,stroke:a,strokeWidth:r,fill:"none",strokeDasharray:x,strokeDashoffset:N,strokeLinecap:"round",className:"transition-all duration-700 ease-out"})]}),o&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsxs("span",{className:"text-xl font-bold text-[var(--fg)]",children:[t,"%"]}),c&&e.jsx("span",{className:"text-xs text-[var(--fg-muted)]",children:c})]})]})}function $e({data:t,color:i="var(--primary)",height:r=48}){if(!t||t.length<2)return null;const a=Math.max(...t),n=Math.min(...t),o=a-n||1,c=t.map((d,x)=>{const N=x/(t.length-1)*100,v=100-(d-n)/o*100;return`${N},${v}`}).join(" ");return e.jsx("div",{style:{height:r},className:"w-full",children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",preserveAspectRatio:"none",children:[e.jsx("polyline",{points:`0,100 ${c} 100,100`,fill:i,fillOpacity:"0.1"}),e.jsx("polyline",{points:c,fill:"none",stroke:i,strokeWidth:"2",vectorEffect:"non-scaling-stroke"})]})})}function O({value:t,max:i=100,color:r="var(--primary)",bgColor:a="var(--bg-soft)",height:n=8,showValue:o=!1,label:c,gradient:d=!1}){const x=Math.min(t/i*100,100);return e.jsxs("div",{children:[(c||o)&&e.jsxs("div",{className:"flex items-center justify-between mb-2 text-sm",children:[c&&e.jsx("span",{className:"text-[var(--fg-muted)] font-medium",children:c}),o&&e.jsx("span",{className:"text-[var(--fg)] font-semibold",children:t})]}),e.jsx("div",{className:"rounded-full overflow-hidden",style:{height:n,backgroundColor:a},children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${d?"bg-gradient-to-r from-[var(--primary)] to-[var(--primary-bright)]":""}`,style:{width:`${x}%`,backgroundColor:d?void 0:r}})})]})}function Le({value:t,suffix:i="%",positive:r=!0}){const a=t>=0,n=Math.abs(t);return e.jsxs("div",{className:`flex items-center gap-1 text-sm ${a?"text-green-500":"text-red-500"}`,children:[e.jsx("svg",{className:`w-4 h-4 ${a?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 10l7-7m0 0l7 7m-7-7v18"})}),e.jsxs("span",{className:"font-semibold",children:[a?"+":"-",n,i]})]})}function g({icon:t,title:i,value:r,subtitle:a,trend:n,trendLabel:o,borderColor:c="var(--primary)",iconBgColor:d,onClick:x,highlight:N=!1,children:v}){const M=d||`${c}20`,A=`
    bg-[var(--card)] border border-[var(--border)] rounded-xl
    border-l-4 transition-all duration-200
    ${x?"cursor-pointer hover:shadow-lg hover:scale-[1.01]":""}
    ${N?"ring-2 ring-[var(--warning)] ring-opacity-50 animate-pulse-subtle":""}
  `;return e.jsx("div",{className:A,style:{borderLeftColor:c},onClick:x,role:x?"button":void 0,tabIndex:x?0:void 0,onKeyDown:x?w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),x())}:void 0,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-[var(--fg-muted)] uppercase tracking-wider mb-1",children:i}),e.jsx("p",{className:"text-3xl font-bold text-[var(--fg)]",children:r})]}),e.jsx("div",{className:"h-12 w-12 rounded-full grid place-items-center flex-shrink-0",style:{backgroundColor:M,color:c},children:t})]}),(n!==void 0||a)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n!==void 0&&e.jsx(Le,{value:n}),a&&e.jsx("span",{className:"text-[var(--fg-muted)]",children:o||a})]}),v&&e.jsx("div",{className:"mt-4",children:v})]})})}function Ge(){var ie;const{user:t}=je(),i=ve(),{t:r}=fe(),[a,n]=_.useState({total_solicitudes:0,en_aprobacion:0,en_planificacion:0,presupuesto_disponible:0,mis_borradores:0,mis_enviadas:0,mis_aprobadas:0,mis_rechazadas:0,mis_total:0,pendientes_aprobar:0,pendientes_planificar:0}),[o,c]=_.useState([]),[d,x]=_.useState([]),[N,v]=_.useState(!1),[M,A]=_.useState(!0),[w,F]=_.useState(!0),$=_.useMemo(()=>(t==null?void 0:t.roles)||[],[t]),k=(t==null?void 0:t.is_admin)||$.some(s=>{var l;return["admin","administrador"].includes(((l=s==null?void 0:s.toLowerCase)==null?void 0:l.call(s))||s)}),L=$.some(s=>{var l;return["planificador","planner"].includes(((l=s==null?void 0:s.toLowerCase)==null?void 0:l.call(s))||s)}),V=$.some(s=>{var l;return["aprobador","approver","jefe","gerente1","gerente2","aprobador_solicitudes"].includes(((l=s==null?void 0:s.toLowerCase)==null?void 0:l.call(s))||s)}),ae=!k||$.some(s=>{var l;return["usuario","user","solicitante"].includes(((l=s==null?void 0:s.toLowerCase)==null?void 0:l.call(s))||s)});_.useEffect(()=>{A(!0),F(!0);let s=[];(k||L)&&s.push(_e.stats().then(l=>{var C;const m=((C=l==null?void 0:l.data)==null?void 0:C.data)||(l==null?void 0:l.data)||{};n(D=>({...D,total_solicitudes:J(m.total_solicitudes??m.total??0),en_aprobacion:J(m.en_aprobacion??m.pending??0),en_planificacion:J(m.en_planificacion??m.in_process??0),presupuesto_disponible:m.presupuesto_disponible??m.presupuesto??0}))}).catch(l=>console.error("Error stats planner",l))),t!=null&&t.id?s.push(oe.listar({user_id:t.id,page_size:100}).then(l=>{const m=l.data.solicitudes||l.data.items||l.data||[];let C=0,D=0,te=0,re=0;m.forEach(R=>{const y=(R.status||R.estado||"").toLowerCase();y==="borrador"||y==="draft"?C++:y==="enviada"||y==="submitted"||y==="pendiente_de_aprobacion"?D++:y==="aprobada"||y==="approved"?te++:(y==="rechazada"||y==="rejected")&&re++}),n(R=>({...R,mis_borradores:C,mis_enviadas:D,mis_aprobadas:te,mis_rechazadas:re,mis_total:m.length})),c(m.slice(0,5))}).catch(l=>console.error("Error solicitudes usuario",l)).finally(()=>F(!1))):F(!1),(V||k)&&s.push(oe.listar({estado:"Enviada",page_size:100}).then(l=>{const m=l.data.solicitudes||l.data.items||l.data||[];n(C=>({...C,pendientes_aprobar:m.length}))}).catch(l=>console.error("Error pendientes aprobacion",l))),Promise.allSettled(s).finally(()=>A(!1)),v(!0),ge.get("/mensajes/inbox?limit=4").then(l=>{l.data.ok&&x(l.data.messages||[])}).catch(l=>console.error("Error cargando mensajes",l)).finally(()=>v(!1))},[t,k,L,V]);const E=_.useMemo(()=>[{key:"id",header:"ID",sortAccessor:s=>Number(s.id)||0},{key:"estado",header:r("dash_table_estado","Estado"),render:s=>{const l=[s.aprobador_nombre,s.aprobador_apellido].filter(Boolean).join(" ").trim()||null,m=[s.planner_nombre,s.planner_apellido].filter(Boolean).join(" ").trim()||null;return e.jsx(ye,{estado:s.estado||s.status||"Desconocido",tooltipInfo:{aprobador:l,planificador:m,fechaAprobacion:s.updated_at,fechaEnvio:s.created_at}})}},{key:"criticidad",header:"Criticidad",render:s=>{const l=(s.criticidad||"Normal").toLowerCase(),m={alta:"text-red-500",media:"text-yellow-500",normal:"text-[var(--fg-muted)]",baja:"text-green-500"};return e.jsx("span",{className:`text-xs font-medium ${m[l]||m.normal}`,children:s.criticidad||"Normal"})}},{key:"items",header:"Items",render:s=>{const l=s.items||[];return e.jsx("span",{className:"text-sm",children:l.length})}},{key:"monto",header:"Monto",render:s=>e.jsx("span",{className:"text-sm font-medium",children:W(s.total_monto||0)})},{key:"centro",header:"Centro",render:s=>e.jsx("span",{className:"text-xs text-[var(--fg-muted)]",children:s.centro||"-"})},{key:"almacen",header:"Almacen",render:s=>e.jsx("span",{className:"text-xs text-[var(--fg-muted)]",children:we(s.almacen_virtual)})},{key:"planificador",header:"Planificador",render:s=>{const l=[s.planner_nombre,s.planner_apellido].filter(Boolean).join(" ").trim();return e.jsx("span",{className:"text-xs text-[var(--fg-muted)]",children:l||"-"})}}],[r]),he=((ie=t==null?void 0:t.nombre)==null?void 0:ie.split(" ")[0])||"Usuario",pe=a.mis_total>0?Math.round(a.mis_aprobadas/a.mis_total*100):0,ue=[3,5,2,8,4,6,3];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(b,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("h1",{className:"text-2xl font-bold text-[var(--fg)]",children:["Hola, ",he]}),ae&&e.jsxs(H,{onClick:()=>i("/solicitudes/nueva"),className:"gap-2",children:[e.jsx(ke,{className:"w-4 h-4"}),r("dash_nueva_solicitud_btn","Nueva Solicitud")]})]})}),ae&&!k&&!L&&e.jsxs(e.Fragment,{children:[e.jsx(b,{delay:100,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{className:"text-base",children:r("dash_mi_resumen","Mi Resumen")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-[var(--fg)]",children:a.mis_total}),e.jsx("span",{className:"text-xs text-[var(--fg-muted)]",children:"total"})]})]})}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Ae,{percentage:pe,size:100,color:"var(--success)",label:"Aprobadas"})}),e.jsxs("div",{className:"flex-1 w-full space-y-3",children:[e.jsx(I,{icon:e.jsx(le,{className:"w-4 h-4"}),label:"Aprobadas",value:a.mis_aprobadas,total:a.mis_total,color:"var(--success)",onClick:()=>i("/mis-solicitudes?estado=aprobada")}),e.jsx(I,{icon:e.jsx(P,{className:"w-4 h-4"}),label:"En espera",value:a.mis_enviadas,total:a.mis_total,color:"var(--warning)",onClick:()=>i("/mis-solicitudes?estado=enviada")}),e.jsx(I,{icon:e.jsx(q,{className:"w-4 h-4"}),label:"Borradores",value:a.mis_borradores,total:a.mis_total,color:"var(--fg-muted)",onClick:()=>i("/mis-solicitudes?estado=borrador")}),e.jsx(I,{icon:e.jsx(ce,{className:"w-4 h-4"}),label:"Rechazadas",value:a.mis_rechazadas,total:a.mis_total,color:"var(--danger)",onClick:()=>i("/mis-solicitudes?estado=rechazada")})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-[var(--border)]",children:[e.jsx("p",{className:"text-xs font-medium text-[var(--fg-muted)] uppercase tracking-wider mb-3",children:"Actividad Semanal"}),e.jsx(Pe,{data:ue,color:"var(--primary)",height:40}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-[10px] text-[var(--fg-muted)] text-center mt-2",children:["L","M","X","J","V","S","D"].map(s=>e.jsx("span",{children:s},s))})]})]})]}),e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{className:"text-base",children:r("dash_mis_recientes","Mis Solicitudes Recientes")}),e.jsx(ne,{className:"w-5 h-5 text-[var(--primary)]"})]})}),e.jsx(j,{children:w?e.jsx(B,{rows:5,columns:3}):e.jsxs(e.Fragment,{children:[e.jsx(z,{columns:E,rows:o,emptyMessage:r("dash_no_solicitudes_usuario","No tienes solicitudes. Crea tu primera solicitud!")}),o.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-[var(--border)]",children:e.jsxs(H,{variant:"ghost",className:"w-full",onClick:()=>i("/mis-solicitudes"),children:[r("dash_ver_todas","Ver todas mis solicitudes"),e.jsx(T,{className:"w-4 h-4 ml-2"})]})})]})})]})]})}),e.jsx(b,{delay:200,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-[var(--warning)]"}),e.jsx(u,{className:"text-base",children:r("dash_notif_title","Notificaciones")})]}),d.length>0&&e.jsxs(Ne,{variant:"warning",children:[d.filter(s=>!s.leido).length," nuevos"]})]})}),e.jsx(j,{children:N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[var(--primary)]"})}):d.length===0?e.jsxs("div",{className:"text-center py-6 text-[var(--fg-muted)]",children:[e.jsx(me,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:r("dash_notif_none","Sin mensajes nuevos")})]}):e.jsxs("div",{className:"space-y-2",children:[d.slice(0,3).map(s=>e.jsx(Q,{msg:s,onClick:()=>i("/mensajes")},s.id)),e.jsxs(H,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>i("/mensajes"),children:["Ver todos",e.jsx(T,{className:"w-3 h-3 ml-2"})]})]})})]}),e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-[var(--accent)]"}),e.jsx(u,{className:"text-base",children:"Novedades SPM"})]})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(Y,{title:"Nueva version disponible",description:"SPM v2.0 incluye mejoras de rendimiento y nuevas funcionalidades",date:"Hace 2 dias",type:"update"}),e.jsx(Y,{title:"Mantenimiento programado",description:"El sistema estara en mantenimiento el domingo de 02:00 a 04:00",date:"Hace 5 dias",type:"maintenance"}),e.jsx(Y,{title:"Nuevos materiales agregados",description:"Se han incorporado 150 nuevos materiales al catalogo",date:"Hace 1 semana",type:"info"})]})})]}),e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-[var(--primary)]"}),e.jsx(u,{className:"text-base",children:"Mi Actividad"})]})}),e.jsxs(j,{className:"space-y-3",children:[a.mis_borradores>0&&e.jsx(G,{icon:e.jsx(q,{className:"w-4 h-4"}),title:`${a.mis_borradores} borrador${a.mis_borradores>1?"es":""} sin enviar`,description:"Completa y envia tus solicitudes",actionLabel:"Ver",onClick:()=>i("/mis-solicitudes?estado=borrador"),color:"var(--fg-muted)"}),a.mis_rechazadas>0&&e.jsx(G,{icon:e.jsx(ce,{className:"w-4 h-4"}),title:`${a.mis_rechazadas} rechazada${a.mis_rechazadas>1?"s":""}`,description:"Revisa los motivos",actionLabel:"Ver",onClick:()=>i("/mis-solicitudes?estado=rechazada"),color:"var(--danger)"}),a.mis_enviadas>0&&e.jsx(G,{icon:e.jsx(P,{className:"w-4 h-4"}),title:`${a.mis_enviadas} en espera`,description:"Pendientes de aprobacion",actionLabel:"Ver",onClick:()=>i("/mis-solicitudes?estado=enviada"),color:"var(--warning)"}),a.mis_borradores===0&&a.mis_rechazadas===0&&a.mis_enviadas===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Ce,{className:"w-8 h-8 mx-auto mb-2 text-green-500 opacity-60"}),e.jsx("p",{className:"text-sm text-[var(--fg-muted)]",children:a.mis_total===0?"Sin solicitudes activas":"Todo al dia"})]})]})]})]})})]}),V&&!k&&e.jsxs(e.Fragment,{children:[e.jsx(b,{delay:100,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:M?e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx(f,{}),e.jsx(f,{}),e.jsx(f,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{icon:e.jsx(Se,{className:"w-6 h-6"}),title:r("dash_pendientes_aprobar","Pendientes de Aprobar"),value:a.pendientes_aprobar,subtitle:r("dash_requieren_decision","Requieren tu decision"),borderColor:"var(--warning)",highlight:a.pendientes_aprobar>0,onClick:()=>i("/aprobaciones")}),e.jsx(g,{icon:e.jsx(q,{className:"w-6 h-6"}),title:r("dash_mis_borradores","Mis Borradores"),value:a.mis_borradores,subtitle:"Solicitudes propias",borderColor:"var(--fg-muted)",onClick:()=>i("/mis-solicitudes")}),e.jsx(g,{icon:e.jsx(le,{className:"w-6 h-6"}),title:r("dash_mis_aprobadas","Mis Aprobadas"),value:a.mis_aprobadas,subtitle:"Solicitudes propias",borderColor:"var(--success)",onClick:()=>i("/mis-solicitudes")}),e.jsx(g,{icon:e.jsx(P,{className:"w-6 h-6"}),title:"Tiempo Promedio",value:"2.3 dias",subtitle:"Meta: 3 dias",borderColor:"var(--info)"})]})})}),e.jsx(b,{delay:200,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(h,{className:"lg:col-span-2",children:[e.jsx(p,{children:e.jsx(u,{children:r("dash_mis_recientes","Mis Solicitudes Recientes")})}),e.jsx(j,{children:w?e.jsx(B,{rows:5,columns:3}):e.jsx(z,{columns:E,rows:o,emptyMessage:"No hay solicitudes"})})]}),e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-[var(--warning)]"}),e.jsx(u,{className:"text-base",children:"Notificaciones"})]})}),e.jsx(j,{children:N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[var(--primary)]"})}):d.length===0?e.jsx("p",{className:"text-center py-6 text-[var(--fg-muted)] text-sm",children:"Sin mensajes nuevos"}):e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsx(Q,{msg:s,onClick:()=>i("/mensajes")},s.id))})})]})]})})]}),L&&!k&&e.jsxs(e.Fragment,{children:[e.jsx(b,{delay:100,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:M?e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx(f,{}),e.jsx(f,{}),e.jsx(f,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{icon:e.jsx(Z,{className:"w-6 h-6"}),title:r("dash_por_planificar","Por Planificar"),value:a.en_planificacion,subtitle:"Solicitudes aprobadas",borderColor:"var(--warning)",highlight:a.en_planificacion>0,onClick:()=>i("/planificador")}),e.jsx(g,{icon:e.jsx(ee,{className:"w-6 h-6"}),title:r("dash_total_sistema","Total Sistema"),value:a.total_solicitudes,subtitle:"Todas las solicitudes",borderColor:"var(--primary)"}),e.jsx(g,{icon:e.jsx(U,{className:"w-6 h-6"}),title:r("dash_presupuesto","Presupuesto"),value:W(a.presupuesto_disponible),subtitle:"Disponible",borderColor:"var(--success)"}),e.jsx(g,{icon:e.jsx(de,{className:"w-6 h-6"}),title:"En Proceso",value:a.en_aprobacion,subtitle:"En aprobacion",borderColor:"var(--info)"})]})})}),e.jsx(b,{delay:200,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(h,{className:"lg:col-span-2",children:[e.jsx(p,{children:e.jsx(u,{children:r("dash_en_proceso","Solicitudes en Proceso")})}),e.jsx(j,{children:w?e.jsx(B,{rows:5,columns:3}):e.jsx(z,{columns:E,rows:o,emptyMessage:"No hay solicitudes para planificar"})})]}),e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsx(u,{className:"text-base",children:"Accesos Rapidos"})}),e.jsx(j,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{icon:e.jsx(Z,{className:"w-5 h-5"}),label:"Planificador",onClick:()=>i("/planificador"),primary:!0}),e.jsx(S,{icon:e.jsx(X,{className:"w-5 h-5"}),label:"KPIs",onClick:()=>i("/kpi")})]})})]})]})})]}),k&&e.jsxs(e.Fragment,{children:[e.jsx(b,{delay:100,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:M?e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx(f,{}),e.jsx(f,{}),e.jsx(f,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{icon:e.jsx(ee,{className:"w-6 h-6"}),title:r("dash_total_solicitudes","Total Solicitudes"),value:a.total_solicitudes,subtitle:"En el sistema",trend:12.5,trendLabel:"vs mes anterior",borderColor:"var(--primary)"}),e.jsx(g,{icon:e.jsx(Me,{className:"w-6 h-6"}),title:r("dash_en_aprobacion","En Aprobacion"),value:a.pendientes_aprobar||a.en_aprobacion,subtitle:"Pendientes de decision",borderColor:"var(--warning)",highlight:a.pendientes_aprobar>0,onClick:()=>i("/aprobaciones")}),e.jsx(g,{icon:e.jsx(de,{className:"w-6 h-6"}),title:r("dash_en_planificacion","En Planificacion"),value:a.en_planificacion,subtitle:"Para asignar",borderColor:"var(--success)",onClick:()=>i("/planificador")}),e.jsx(g,{icon:e.jsx(U,{className:"w-6 h-6"}),title:r("dash_presupuesto","Presupuesto"),value:W(a.presupuesto_disponible),subtitle:"Disponible global",borderColor:"var(--info)"})]})})}),e.jsx(b,{delay:200,children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{className:"text-base",children:"Tendencia Semanal"}),e.jsx(X,{className:"w-5 h-5 text-[var(--primary)]"})]})}),e.jsxs(j,{children:[e.jsx($e,{data:[45,52,48,61,58,67,72],height:80}),e.jsx("div",{className:"grid grid-cols-7 gap-1 text-[10px] text-[var(--fg-muted)] text-center mt-2",children:["Lun","Mar","Mie","Jue","Vie","Sab","Dom"].map(s=>e.jsx("span",{children:s},s))}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-[var(--border)] flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-[var(--fg-muted)]",children:"Promedio semanal"}),e.jsx("span",{className:"font-semibold text-[var(--fg)]",children:"58 solicitudes"})]})]})]}),e.jsxs(h,{className:"lg:col-span-2",children:[e.jsx(p,{children:e.jsx(u,{children:r("dash_ultimas_sistema","Ultimas Solicitudes del Sistema")})}),e.jsx(j,{children:w?e.jsx(B,{rows:5,columns:3}):e.jsx(z,{columns:E,rows:o,emptyMessage:"No hay solicitudes"})})]})]})}),e.jsx(b,{delay:300,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsx(u,{className:"text-base",children:"Distribucion de Estados"})}),e.jsxs(j,{className:"space-y-4",children:[e.jsx(O,{value:a.mis_aprobadas||65,max:100,color:"var(--success)",label:"Aprobadas",showValue:!0}),e.jsx(O,{value:a.pendientes_aprobar||20,max:100,color:"var(--warning)",label:"Pendientes",showValue:!0}),e.jsx(O,{value:a.mis_rechazadas||15,max:100,color:"var(--danger)",label:"Rechazadas",showValue:!0})]})]}),e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-[var(--warning)]"}),e.jsx(u,{className:"text-base",children:"Notificaciones"})]})}),e.jsx(j,{children:N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[var(--primary)]"})}):d.length===0?e.jsx("p",{className:"text-center py-6 text-[var(--fg-muted)] text-sm",children:"Sin mensajes nuevos"}):e.jsx("div",{className:"space-y-2",children:d.slice(0,3).map(s=>e.jsx(Q,{msg:s,onClick:()=>i("/mensajes")},s.id))})})]}),e.jsxs(h,{children:[e.jsx(p,{className:"pb-2",children:e.jsx(u,{className:"text-base",children:"Accesos Rapidos"})}),e.jsx(j,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(S,{icon:e.jsx(be,{className:"w-5 h-5"}),label:"Admin",onClick:()=>i("/admin"),primary:!0}),e.jsx(S,{icon:e.jsx(X,{className:"w-5 h-5"}),label:"KPIs",onClick:()=>i("/kpi")}),e.jsx(S,{icon:e.jsx(Z,{className:"w-5 h-5"}),label:"Planificador",onClick:()=>i("/planificador")}),e.jsx(S,{icon:e.jsx(U,{className:"w-5 h-5"}),label:"Presupuestos",onClick:()=>i("/presupuestos")})]})})]})]})})]})]})}function Q({msg:t,onClick:i}){const r=t.leido===0,a=`${t.remitente_nombre||""} ${t.remitente_apellido||""}`.trim()||"Usuario";return e.jsxs("button",{type:"button",className:`
        w-full text-left p-3 rounded-lg border transition-all duration-200 cursor-pointer
        ${r?"bg-[var(--primary-muted)]/20 border-[var(--primary)]/30 hover:border-[var(--primary)]/50":"bg-[var(--bg-soft)] border-[var(--border)] hover:border-[var(--border-hover)]"}
      `,onClick:i,children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(me,{className:`w-3.5 h-3.5 mt-0.5 flex-shrink-0 ${r?"text-[var(--primary)]":"text-[var(--fg-muted)]"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:`text-xs font-medium truncate ${r?"text-[var(--fg)]":"text-[var(--fg-muted)]"}`,children:a}),e.jsx("p",{className:`text-xs truncate mt-0.5 ${r?"text-[var(--fg)]":"text-[var(--fg-muted)]"}`,children:t.asunto})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] text-[var(--fg-subtle)] ml-5 mt-1",children:[e.jsx(P,{className:"w-2.5 h-2.5"}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString("es-AR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]})]})}function S({icon:t,label:i,onClick:r,primary:a=!1}){return e.jsxs("button",{type:"button",onClick:r,className:`
        flex flex-col items-center justify-center gap-2 p-4 rounded-xl border transition-all duration-200
        ${a?"bg-[var(--primary)] text-white border-[var(--primary)] hover:bg-[var(--primary-bright)]":"bg-[var(--bg-soft)] border-[var(--border)] text-[var(--fg)] hover:border-[var(--primary)] hover:bg-[var(--primary-muted)]/10"}
      `,children:[t,e.jsx("span",{className:"text-xs font-medium",children:i})]})}function I({icon:t,label:i,value:r,total:a,color:n,onClick:o}){const c=a>0?r/a*100:0;return e.jsxs("button",{type:"button",onClick:o,className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-[var(--bg-soft)] transition-all group",children:[e.jsx("span",{className:"flex-shrink-0 w-8 h-8 rounded-full grid place-items-center",style:{backgroundColor:`${n}20`,color:n},children:t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-[var(--fg)]",children:i}),e.jsx("span",{className:"text-sm font-bold",style:{color:n},children:r})]}),e.jsx("div",{className:"h-1.5 bg-[var(--bg-soft)] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${c}%`,backgroundColor:n}})})]}),e.jsx(T,{className:"w-4 h-4 text-[var(--fg-muted)] opacity-0 group-hover:opacity-100 transition-opacity"})]})}function G({icon:t,title:i,description:r,actionLabel:a,onClick:n,color:o="var(--primary)"}){return e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-[var(--border)] bg-[var(--bg-soft)] hover:border-[var(--border-hover)] transition-all group cursor-pointer",onClick:n,role:"button",tabIndex:0,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),n())},children:[e.jsx("span",{className:"flex-shrink-0 w-8 h-8 rounded-full grid place-items-center",style:{backgroundColor:`${o}15`,color:o},children:t}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-[var(--fg)] leading-tight",children:i}),e.jsx("p",{className:"text-xs text-[var(--fg-muted)] mt-0.5",children:r}),e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-medium mt-1.5 group-hover:gap-1.5 transition-all",style:{color:o},children:[a,e.jsx(T,{className:"w-3 h-3"})]})]})]})}function Y({title:t,description:i,date:r,type:a="info"}){const n={update:{icon:e.jsx(ee,{className:"w-3.5 h-3.5"}),color:"var(--success)"},maintenance:{icon:e.jsx(P,{className:"w-3.5 h-3.5"}),color:"var(--warning)"},info:{icon:e.jsx(xe,{className:"w-3.5 h-3.5"}),color:"var(--accent)"}},o=n[a]||n.info;return e.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-[var(--bg-soft)] transition-colors",children:[e.jsx("span",{className:"flex-shrink-0 w-7 h-7 rounded-full grid place-items-center mt-0.5",style:{backgroundColor:`${o.color}15`,color:o.color},children:o.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-[var(--fg)] leading-tight",children:t}),e.jsx("p",{className:"text-xs text-[var(--fg-muted)] mt-0.5 line-clamp-2",children:i}),e.jsx("p",{className:"text-[10px] text-[var(--fg-subtle)] mt-1",children:r})]})]})}export{Ge as default};
