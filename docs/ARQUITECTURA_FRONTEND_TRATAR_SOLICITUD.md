# ARQUITECTURA FRONTEND - MÃ“DULO "TRATAR SOLICITUD"

## ğŸ“ Estructura de Archivos

```
frontend/src/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ Planner.jsx ........................... PÃ¡gina principal (modificada)
â”‚       â””â”€ Agrega: <TratarSolicitudModal />
â”‚
â”œâ”€â”€ components/
â”‚   â””â”€â”€ Planner/
â”‚       â”œâ”€â”€ TratarSolicitudModal.jsx ......... [NUEVO] Coordinador principal
â”‚       â”œâ”€â”€ Paso1AnalisisInicial.jsx ........ [NUEVO] PresentaciÃ³n anÃ¡lisis
â”‚       â”œâ”€â”€ Paso2DecisionAbastecimiento.jsx . [NUEVO] Selector de opciones
â”‚       â””â”€â”€ Paso3RevisionFinal.jsx .......... [NUEVO] ConfirmaciÃ³n y guardado
â”‚
â”œâ”€â”€ services/
â”‚   â””â”€â”€ spm.js ............................... API wrapper existente
â”‚       â””â”€ api() usado en todos los componentes
â”‚
â””â”€â”€ store/
    â””â”€â”€ authStore.js ......................... Zustand auth existente
        â””â”€ Acceso a usuario actual
```

---

## ğŸ”„ FLUJO DE COMPONENTES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Planner.jsx (PÃ¡gina)                      â”‚
â”‚  - Tabla de solicitudes                                      â”‚
â”‚  - BotÃ³n "Tratar (nuevo)" por fila                           â”‚
â”‚  - Estado: selectedParaTratar                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ onClick â†’ setSelectedParaTratar(solicitud)
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            TratarSolicitudModal (Modal Coordinador)          â”‚
â”‚  - Props: solicitud, isOpen, onClose, onComplete            â”‚
â”‚  - Estado: paso (1-3), analisis, decisiones, opciones       â”‚
â”‚  - Carga: cargarAnalisis(), cargarOpcionesItem()            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
      PASO 1       PASO 2       PASO 3
        â”‚            â”‚            â”‚
        â†“            â†“            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Paso1...  â”‚  â”‚Paso2...  â”‚  â”‚Paso3...  â”‚
â”‚AnalisisI â”‚  â”‚Decision  â”‚  â”‚Revision  â”‚
â”‚nicial    â”‚  â”‚Abasteci  â”‚  â”‚Final     â”‚
â”‚          â”‚  â”‚miento    â”‚  â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚             â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚ onNext / onPrev
            â†“
    [Cambio de paso]
```

---

## ğŸ“¡ INTEGRACIÃ“N CON APIs BACKEND

```
Frontend Components        Backend Endpoints (Flask)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. TratarSolicitudModal
   â””â”€ cargarAnalisis()
      â””â”€â†’ POST /api/planificador/solicitudes/{id}/analizar
          â†’ Response: {resumen, materiales_por_criticidad,
                       conflictos, avisos, recomendaciones}

2. Paso2DecisionAbastecimiento
   â””â”€ cargarOpcionesItem(itemIdx)
      â””â”€â†’ GET /api/planificador/solicitudes/{id}/items/{idx}/
              opciones-abastecimiento
          â†’ Response: {opciones: [{opcion_id, nombre, tipo,
                                   plazo_dias, precio_unitario,
                                   rating, compatibilidad_pct}]}

3. Paso3RevisionFinal
   â””â”€ completarTratamiento()
      â””â”€â†’ POST /api/planificador/solicitudes/{id}/
              guardar-tratamiento
          â†’ Request: {decisiones: [{item_idx, opcion_id,
                                    id_proveedor, codigo_material,
                                    cantidad_aprobada, plazo_dias,
                                    precio_unitario_final,
                                    compatibilidad_pct}],
                      usuario_id}
          â†’ Response: {items_guardados, status}
```

---

## ğŸ¨ MAPA VISUAL DEL MODAL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–ˆâ–ˆâ–ˆ  Tratar Solicitud #123                               [X]   â”‚ â† Header con ID
â”‚ Responsabilidad de Centro 1008 / Mantenimiento                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â—] AnÃ¡lisis  â”€â”€â”€â”€  [2] DecisiÃ³n  â”€â”€â”€â”€  [3] ConfirmaciÃ³n      â”‚ â† Indicador Pasos
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  PASO 1 - ANÃLISIS INICIAL                                    â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚Total: $50,000â”‚  â”‚Disponible: $ â”‚  â”‚Solicitado:  â”‚         â”‚
â”‚  â”‚              â”‚  â”‚30,000        â”‚  â”‚$45,000      â”‚ â† Tarjetas
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                â”‚
â”‚  âš ï¸ PRESUPUESTO INSUFICIENTE - Falta: $15,000               â”‚
â”‚                                                                â”‚
â”‚  MATERIALES POR CRITICIDAD                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                â”‚
â”‚  â— CRÃTICOS (3)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ MAT001 - Piezas motor crÃ­ticas                â”‚          â”‚
â”‚  â”‚ CÃ³digo: MAT001 | Qty: 50 | Costo: $12,500    â”‚ â† Items â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â”‚  â— NORMALES (5)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ MAT002 - TuberÃ­as PVC                         â”‚          â”‚
â”‚  â”‚ CÃ³digo: MAT002 | Qty: 100 | Costo: $8,500    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â”‚  â— BAJOS (2)                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ MAT003 - TornillerÃ­a surtida                  â”‚          â”‚
â”‚  â”‚ CÃ³digo: MAT003 | Qty: 500 | Costo: $2,000    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                â”‚
â”‚  ğŸš¨ CONFLICTOS DETECTADOS (1)                               â”‚
â”‚  â€¢ Presupuesto insuficiente para item 0:                    â”‚
â”‚    requiere $12,500                                           â”‚
â”‚                                                                â”‚
â”‚  ğŸ’¡ RECOMENDACIONES                                          â”‚
â”‚  [NORMAL] Considerar materiales equivalentes para            â”‚
â”‚           reducir costo sin perder funcionalidad             â”‚
â”‚                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â† Anterior] [Paso 1 de 3] [Siguiente â†’]                     â”‚ â† Botones
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ PASO 2 VISTA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–ˆâ–ˆâ–ˆ  Tratar Solicitud #123                               [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [1] AnÃ¡lisis  â”€â”€â”€â”€  [â—] DecisiÃ³n  â”€â”€â”€â”€  [3] ConfirmaciÃ³n      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Material 1 de 8    â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘      â”‚
â”‚                                                                â”‚
â”‚  INFORMACIÃ“N DEL MATERIAL                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚ CÃ³digo: MAT001          â”‚                                â”‚
â”‚  â”‚ DescripciÃ³n: Piezas m.  â”‚                                â”‚
â”‚  â”‚ Cantidad Solicitada: 50 â”‚                                â”‚
â”‚  â”‚ Precio Unitario: $250   â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                â”‚
â”‚  SELECCIONA UNA OPCIÃ“N DE ABASTECIMIENTO:                   â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ ğŸ“¦ Stock Internoâ”‚  â”‚ ğŸšš QuickSupply  â”‚                   â”‚
â”‚  â”‚ AlmacÃ©n Interno â”‚  â”‚ Proveedor       â”‚                   â”‚
â”‚  â”‚ 1 dÃ­a           â”‚  â”‚ 5 dÃ­as          â”‚                   â”‚
â”‚  â”‚ $250            â”‚  â”‚ $240            â”‚ â† Tarjetas        â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    seleccionablesâ”‚
â”‚  â”‚ Costo: $12,500  â”‚  â”‚ Costo: $12,000  â”‚                   â”‚
â”‚  â””â”€ SELECCIONADA â”€â”˜  â”‚ Rating: â­â­â­â­  â”‚                   â”‚
â”‚  [âœ“]                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ ğŸšš SupplyMaster â”‚  â”‚ ğŸ”„ Equivalencia â”‚                   â”‚
â”‚  â”‚ Proveedor       â”‚  â”‚ Material MAT001Bâ”‚                   â”‚
â”‚  â”‚ 7 dÃ­as          â”‚  â”‚ 1 dÃ­a           â”‚                   â”‚
â”‚  â”‚ $235            â”‚  â”‚ $200            â”‚                   â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                   â”‚
â”‚  â”‚ Costo: $11,750  â”‚  â”‚ Costo: $10,000  â”‚                   â”‚
â”‚  â”‚ Rating: â­â­â­   â”‚  â”‚ Compatib: 95%   â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                â”‚
â”‚  DECISIONES HASTA AHORA:                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MAT001 - Piezas motor crÃ­ticas       âœ“ Stock Internoâ”‚  â”‚
â”‚  â”‚ MAT002 - TuberÃ­as PVC               [Pendiente]     â”‚  â”‚
â”‚  â”‚ MAT003 - TornillerÃ­a surtida        [Pendiente]     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â† Material Anterior] [Siguiente Material â†’]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… PASO 3 VISTA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–ˆâ–ˆâ–ˆ  Tratar Solicitud #123                               [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [1] AnÃ¡lisis  â”€â”€â”€â”€  [2] DecisiÃ³n  â”€â”€â”€â”€  [â—] ConfirmaciÃ³n      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  REVISIÃ“N FINAL DE DECISIONES                                â”‚
â”‚  Verifica todas las opciones seleccionadas                    â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Material â”‚ OpciÃ³n  â”‚ Cant â”‚ P.U. â”‚ Subtotal â”‚ Plazo â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ MAT001   â”‚ Stock   â”‚  50  â”‚ $250 â”‚ $12,500  â”‚  1d   â”‚   â”‚
â”‚  â”‚ MAT002   â”‚ Quick   â”‚ 100  â”‚ $240 â”‚ $24,000  â”‚  5d   â”‚   â”‚
â”‚  â”‚ MAT003   â”‚ Equiv   â”‚ 500  â”‚ $200 â”‚ $10,000  â”‚  1d   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Total Items: 3/3 â”‚  â”‚ Estado: âœ“ Compl. â”‚  â”‚ Costo Totalâ”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚ $46,500    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  INFORMACIÃ“N DE ENTREGAS                                     â”‚
â”‚  â€¢ Plazo mÃ¡ximo de entrega: 5 dÃ­as                           â”‚
â”‚  â€¢ Proveedores involucrados: Stock Interno, QuickSupply     â”‚
â”‚                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â† Volver AtrÃ¡s] [âœ“ Completar Tratamiento]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ CONEXIÃ“N DE PROPS

```
Planner.jsx
    â”‚
    â”œâ”€â†’ solicitud = {id, centro, sector, items: [...], ...}
    â”‚
    â””â”€â†’ <TratarSolicitudModal
            solicitud={selectedParaTratar}
            isOpen={!!selectedParaTratar}
            onClose={...}
            onComplete={...}
        />
            â”‚
            â”œâ”€â†’ <Paso1AnalisisInicial
            â”‚       analisis={analisis}
            â”‚       onNext={avanzarPaso}
            â”‚   />
            â”‚
            â”œâ”€â†’ <Paso2DecisionAbastecimiento
            â”‚       solicitud={solicitud}
            â”‚       analisis={analisis}
            â”‚       opciones={opciones}
            â”‚       decisiones={decisiones}
            â”‚       onGuardarDecision={guardarDecision}
            â”‚       onCargarOpciones={cargarOpcionesItem}
            â”‚       onNext={setPaso(3)}
            â”‚       onPrev={setPaso(1)}
            â”‚   />
            â”‚
            â””â”€â†’ <Paso3RevisionFinal
                    solicitud={solicitud}
                    decisiones={decisiones}
                    onPrev={setPaso(2)}
                    onCompleta={completarTratamiento}
                    loading={loading}
                />
```

---

## ğŸ“Š ESTADO GLOBAL DEL MODAL

```javascript
// TratarSolicitudModal State
{
  paso: 1|2|3,                          // Paso actual
  loading: boolean,                     // Cargando datos
  error: string|null,                   // Mensaje de error

  analisis: {                           // Datos PASO 1
    resumen: {
      presupuesto_total: number,
      presupuesto_disponible: number,
      total_solicitado: number
    },
    materiales_por_criticidad: {
      CrÃ­tico: [...],
      Normal: [...],
      Bajo: [...]
    },
    conflictos: [...],
    avisos: [...],
    recomendaciones: [...]
  },

  decisiones: {                         // Decisiones PASO 2
    0: {opcion_id, nombre, precio_unitario, ...},
    1: {opcion_id, nombre, precio_unitario, ...},
    ...
  },

  opciones: {                           // Opciones PASO 2
    0: [{opcion_id, nombre, tipo, ...}],
    1: [{opcion_id, nombre, tipo, ...}],
    ...
  }
}
```

---

## ğŸ­ ESTADOS VISUALES

### Botones
```
[Normal]        [Hover]         [Disabled]      [Loading]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Button  â”‚     â”‚Button  â”‚      â”‚Button  â”‚      â”‚Button  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ âŸ³     â”‚
(colored)     (darker)        (gray/50%)      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tarjetas Seleccionables
```
[No seleccionada]    [Seleccionada]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚     â”‚              â”‚ âœ“
â”‚   OpciÃ³n 1   â”‚     â”‚   OpciÃ³n 2   â”‚
â”‚   $250       â”‚     â”‚   $240       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(gray border)       (blue border, blue bg)
```

### Tabla
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header  â”‚ Header   â”‚ Header   â”‚  â† bg-gray-100
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Data    â”‚ Data     â”‚ Data     â”‚  â† bg-white
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Data    â”‚ Data     â”‚ Data     â”‚  â† bg-gray-50
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± RESPONSIVIDAD

- **Desktop (>768px):** 2 columnas en PASO 2, tabla normal en PASO 3
- **Tablet (768px):** 2 columnas en PASO 2, tabla con scroll en PASO 3
- **Mobile (<768px):** 1 columna en PASO 2, tabla con scroll horizontal en PASO 3

---

*Diagrama actualizado: 22 Nov 2025*
